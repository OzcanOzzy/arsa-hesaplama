<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Emlaknomi Arsa Hesaplama</title>
    
    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- React & ReactDOM CDN -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    
    <!-- Babel CDN (TarayÄ±cÄ±da JSX okuyabilmek iÃ§in) -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

    <!-- HTML2PDF CDN (DoÄŸrudan PDF Ä°ndirmek Ä°Ã§in) -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>

    <style>
        /* YazdÄ±rÄ±rken (Rapor AlÄ±rken) arkaplan renklerinin korunmasÄ± iÃ§in */
        @media print {
            body {
                -webkit-print-color-adjust: exact;
                print-color-adjust: exact;
            }
            /* Gerekirse yazdÄ±rÄ±lÄ±rken marginleri sÄ±fÄ±rlama */
            @page { margin: 1cm; }
        }
    </style>
</head>
<body class="bg-[#F8FAFC]">
    
    <!-- React uygulamasÄ±nÄ±n Ã§alÄ±ÅŸacaÄŸÄ± ana kapsayÄ±cÄ± -->
    <div id="root"></div>

    <!-- React ve Uygulama KodlarÄ± -->
    <script type="text/babel">
        const { useState, useEffect } = React;

        // --- Ä°KON BÄ°LEÅENLERÄ° (BaÄŸÄ±mlÄ±lÄ±k olmamasÄ± iÃ§in SVG olarak eklendi) ---
        const Icon = ({ children, className }) => (
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}>
                {children}
            </svg>
        );
        const Building2 = ({className}) => <Icon className={className}><path d="M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z"/><path d="M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2"/><path d="M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2"/><path d="M10 6h4"/><path d="M10 10h4"/><path d="M10 14h4"/><path d="M10 18h4"/></Icon>;
        const MapPin = ({className}) => <Icon className={className}><path d="M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z"/><circle cx="12" cy="10" r="3"/></Icon>;
        const Share2 = ({className}) => <Icon className={className}><circle cx="18" cy="5" r="3"/><circle cx="6" cy="12" r="3"/><circle cx="18" cy="19" r="3"/><line x1="8.59" x2="15.42" y1="13.51" y2="17.49"/><line x1="15.41" x2="8.59" y1="6.51" y2="10.49"/></Icon>;
        const FileText = ({className}) => <Icon className={className}><path d="M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z"/><path d="M14 2v4a2 2 0 0 0 2 2h4"/><path d="M10 9H8"/><path d="M16 13H8"/><path d="M16 17H8"/></Icon>;
        const Ruler = ({className}) => <Icon className={className}><path d="M21.3 15.3l-5.6 5.6a2.83 2.83 0 0 1-4 0l-9.9-9.9a2.83 2.83 0 0 1 0-4l5.6-5.6a2.83 2.83 0 0 1 4 0l9.9 9.9a2.83 2.83 0 0 1 0 4Z"/><path d="M14.5 4.5l5 5"/><path d="M12.5 6.5l2 2"/><path d="M10.5 8.5l2 2"/><path d="M8.5 10.5l2 2"/><path d="M6.5 12.5l2 2"/></Icon>;
        const ChevronDown = ({className}) => <Icon className={className}><path d="m6 9 6 6 6-6"/></Icon>;
        const LayoutGrid = ({className}) => <Icon className={className}><rect width="7" height="7" x="3" y="3" rx="1"/><rect width="7" height="7" x="14" y="3" rx="1"/><rect width="7" height="7" x="14" y="14" rx="1"/><rect width="7" height="7" x="3" y="14" rx="1"/></Icon>;
        const Home = ({className}) => <Icon className={className}><path d="m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"/><polyline points="9 22 9 12 15 12 15 22"/></Icon>;
        const AlertTriangle = ({className}) => <Icon className={className}><path d="m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z"/><path d="M12 9v4"/><path d="M12 17h.01"/></Icon>;
        const Minus = ({className}) => <Icon className={className}><path d="M5 12h14"/></Icon>;
        const Plus = ({className}) => <Icon className={className}><path d="M5 12h14"/><path d="M12 5v14"/></Icon>;
        const Trash2 = ({className}) => <Icon className={className}><path d="M3 6h18"/><path d="M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6"/><path d="M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2"/><line x1="10" x2="10" y1="11" y2="17"/><line x1="14" x2="14" y1="11" y2="17"/></Icon>;
        const PieChart = ({className}) => <Icon className={className}><path d="M21.21 15.89A10 10 0 1 1 8 2.83"/><path d="M22 12A10 10 0 0 0 12 2v10z"/></Icon>;
        const MapIcon = ({className}) => <Icon className={className}><polygon points="3 6 9 3 15 6 21 3 21 18 15 21 9 18 3 21"/><line x1="9" x2="9" y1="3" y2="18"/><line x1="15" x2="15" y1="6" y2="21"/></Icon>;
        const CheckCircle = ({className}) => <Icon className={className}><path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"/><polyline points="22 4 12 14.01 9 11.01"/></Icon>;

        // --- UYGULAMA MANTIK KODLARI ---
        const calcBrut = (net) => Math.round(net * 1.30);

        const DAÄ°RE_STANDARTLARI = {
            '1+1': {
                Kucuk: { net: 35, brut: calcBrut(35) },
                Orta: { net: 45, brut: calcBrut(45) },
                Buyuk: { net: 55, brut: calcBrut(55) }
            },
            '2+1': {
                Kucuk: { net: 70, brut: calcBrut(70) },
                Orta: { net: 80, brut: calcBrut(80) },
                Buyuk: { net: 100, brut: calcBrut(100) }
            },
            '3+1': {
                Kucuk: { net: 95, brut: calcBrut(95) },
                Orta: { net: 120, brut: calcBrut(120) },
                Buyuk: { net: 140, brut: calcBrut(140) }
            },
            '4+1': {
                Kucuk: { net: 130, brut: calcBrut(130) },
                Orta: { net: 160, brut: calcBrut(160) },
                Buyuk: { net: 180, brut: calcBrut(180) }
            }
        };

        const checkKapasite = (testSepet, katSayisi, katBrutKapasitesi) => {
            if (!katSayisi || katSayisi <= 0) return true;
            
            let items = [];
            Object.values(testSepet).forEach(d => {
                for(let i=0; i<d.adet; i++) items.push(d.brut);
            });
            
            if (items.length === 0) return true;

            items.sort((a, b) => b - a);
            
            // BuÃ§uklu katlar iÃ§in dinamik kat dizisi oluÅŸtur (Ã–rn: 2.5 kat -> [100, 100, 50])
            const tamKatlar = Math.floor(katSayisi);
            const bucukKisim = katSayisi - tamKatlar;
            let floors = [];
            for (let i = 0; i < tamKatlar; i++) floors.push(katBrutKapasitesi);
            if (bucukKisim > 0) floors.push(katBrutKapasitesi * bucukKisim);
            
            for (let brut of items) {
                let placed = false;
                for (let i = 0; i < floors.length; i++) {
                    if (floors[i] + 0.01 >= brut) {
                        floors[i] -= brut;
                        placed = true;
                        break;
                    }
                }
                if (!placed) return false; 
            }
            return true;
        };

        const EmlaknomiLogo = () => (
            <div className="relative w-16 h-16 bg-[#1D63CB] rounded-2xl flex items-center justify-center shadow-lg overflow-hidden shrink-0 border-b-4 border-blue-800">
                <div className="relative w-12 h-12 bg-[#FF8C00] rounded-full flex items-center justify-center border-2 border-white shadow-inner">
                    <Building2 className="w-7 h-7 text-white" />
                    <div className="absolute -bottom-1 -right-1 bg-white rounded-full p-1 shadow-sm">
                        <MapPin className="w-3 h-3 text-[#1D63CB]" />
                    </div>
                </div>
            </div>
        );

        function App() {
            // BaÅŸlangÄ±Ã§ deÄŸerleri tamamen boÅŸ olacak ÅŸekilde dÃ¼zenlendi
            const [params, setParams] = useState({
                arsaAlani: '',
                yolaTerkDeger: '',
                yolaTerkBirim: 'm2',
                emsal: '',
                taks: '',
                katSayisi: '',
                katBirim: 'kat', // Yeni alan: kat veya metre
                nizamTipi: 'AyrÄ±k'
            });

            const [sepet, setSepet] = useState({});
            const [toastMessage, setToastMessage] = useState("");
            
            const [ozet, setOzet] = useState({
                emsalAlani: 0,
                toplamBrutKapasite: 0,
                kullanilanM2: 0,
                dolulukOrani: 0,
                netArsa: 0,
                toplamDaire: 0,
                toplamNetM2: 0,
                katSayisi: 0,
                katBrutKapasitesi: 0,
                yerlesimUygun: true
            });

            const handleParamChange = (e) => {
                const { name, value } = e.target;
                if (name !== 'nizamTipi' && name !== 'yolaTerkBirim' && name !== 'katBirim') {
                    const numericValue = value === '' ? '' : parseFloat(value);
                    setParams(prev => ({ ...prev, [name]: numericValue }));
                } else {
                    setParams(prev => ({ ...prev, [name]: value }));
                }
            };

            const updateAdet = (odaTipi, boyut, delta) => {
                const key = `${odaTipi}-${boyut}`;
                const daireData = DAÄ°RE_STANDARTLARI[odaTipi][boyut];

                setSepet(prev => {
                    const mevcut = prev[key] || { adet: 0, odaTipi, boyut, ...daireData };
                    const yeniAdet = Math.max(0, mevcut.adet + delta);
                    
                    if (delta > 0) {
                        const testSepet = { ...prev, [key]: { ...mevcut, adet: yeniAdet } };
                        const sigarMi = checkKapasite(testSepet, ozet.katSayisi, ozet.katBrutKapasitesi);
                        if (!sigarMi) {
                            return prev; 
                        }
                    }
                    
                    return { ...prev, [key]: { ...mevcut, adet: yeniAdet } };
                });
            };

            // PaylaÅŸÄ±lacak ve PDF yapÄ±lacak Ortak Metin/Ä°Ã§erik Fonksiyonu
            const getReportDetails = () => {
                let manuelDetay = "";
                let seciliVarMi = false;
                Object.values(sepet).forEach(d => {
                    if (d.adet > 0) {
                        seciliVarMi = true;
                        manuelDetay += `â€¢ ${d.odaTipi} (${d.boyut}): ${d.adet} Adet (Net: ${d.net}mÂ²)\n`;
                    }
                });

                let tahminiSenaryoText = "";
                let tahminiSenaryoHtml = "";
                let hasTahmini = false;
                
                Object.keys(DAÄ°RE_STANDARTLARI).forEach((oda) => {
                    const s = DAÄ°RE_STANDARTLARI[oda].Orta;
                    
                    const tamKatSayisi = Math.floor(ozet.katSayisi || 0);
                    const bucukKisim = (ozet.katSayisi || 0) - tamKatSayisi;
                    
                    const adetPerTamKat = Math.floor((ozet.katBrutKapasitesi || 0) / s.brut);
                    const adetBucukKat = bucukKisim > 0 ? Math.floor(((ozet.katBrutKapasitesi || 0) * bucukKisim) / s.brut) : 0;
                    
                    const adet = (adetPerTamKat * tamKatSayisi) + adetBucukKat;
                    
                    const kalanBrutPerTamKat = Math.max(0, (ozet.katBrutKapasitesi || 0) - (adetPerTamKat * s.brut));
                    const kalanNetPerTamKat = Math.floor(kalanBrutPerTamKat / 1.30);
                    
                    let kalanNotu = "";
                    if (bucukKisim > 0) {
                        const kalanBrutBucuk = Math.max(0, ((ozet.katBrutKapasitesi || 0) * bucukKisim) - (adetBucukKat * s.brut));
                        const kalanNetBucuk = Math.floor(kalanBrutBucuk / 1.30);
                        if (kalanNetPerTamKat > 0 || kalanNetBucuk > 0) {
                            kalanNotu = `(Artan Net: Normal Kat ${kalanNetPerTamKat}mÂ², Ã‡atÄ±/Ã‡ekme ${kalanNetBucuk}mÂ²)`;
                        }
                    } else {
                        if (kalanNetPerTamKat > 0) {
                            kalanNotu = `(Her katta ${kalanNetPerTamKat} mÂ² net boÅŸluk kalÄ±r)`;
                        }
                    }
                    
                    if (adet > 0) {
                        hasTahmini = true;
                        tahminiSenaryoText += `â€¢ Sadece ${oda} (Net: ${s.net}mÂ² / BrÃ¼t: ${s.brut}mÂ²) yapÄ±lÄ±rsa: ${adet} Adet ${kalanNotu}\n`;
                        tahminiSenaryoHtml += `<li style="padding: 8px 0; border-bottom: 1px dashed #cbd5e1;"><strong>Sadece ${oda} <span style="font-weight:normal; color:#64748b; font-size:13px;">(Net: ${s.net}mÂ² / BrÃ¼t: ${s.brut}mÂ²)</span> yapÄ±lÄ±rsa:</strong> ${adet} Adet <span style="color: #64748b; font-size: 13px; margin-left: 5px;">${kalanNotu}</span></li>`;
                    }
                });

                if (!hasTahmini) {
                    tahminiSenaryoText += "â€¢ Bu imar durumuna gÃ¶re standart daire sÄ±ÄŸmamaktadÄ±r.\n";
                    tahminiSenaryoHtml += `<li style="padding: 8px 0; color: #ef4444;">Bu imar durumuna gÃ¶re standart daire sÄ±ÄŸmamaktadÄ±r.</li>`;
                }

                const verimlilik = seciliVarMi && ozet.kullanilanM2 ? ((ozet.toplamNetM2 / ozet.kullanilanM2) * 100).toFixed(1) : "0.0";
                
                return { manuelDetay, seciliVarMi, verimlilik, tahminiSenaryoText, tahminiSenaryoHtml };
            };

            // Rapor Alma (DoÄŸrudan Temiz PDF Ä°ndir)
            const handlePrint = () => {
                const { manuelDetay, seciliVarMi, verimlilik, tahminiSenaryoHtml } = getReportDetails();
                
                const maxNetAlan = Math.round(ozet.emsalAlani || 0);
                const netInsaatStr = seciliVarMi 
                    ? `${ozet.toplamNetM2.toLocaleString()} mÂ²` 
                    : `${maxNetAlan.toLocaleString()} mÂ² <span style="color:#94a3b8; font-size:12px; font-weight:normal;">(En fazla yapÄ±labilecek net alan)</span>`;
                
                const planlananUniteStr = seciliVarMi ? `${ozet.toplamDaire} Adet` : '<span style="color:#94a3b8; font-weight:normal;">Belirlenmedi (Manuel seÃ§im yapÄ±lmadÄ±)</span>';
                const verimStr = seciliVarMi ? `%${verimlilik}` : '<span style="color:#94a3b8; font-weight:normal;">Belirlenmedi</span>';
                
                const katBilgisi = params.katBirim === 'metre' ? `YÃ¼kseklik: ${params.katSayisi}m (~${ozet.katSayisi} Kat)` : `Kat: ${params.katSayisi || 0}`;

                // Arka planda geÃ§ici, temiz ve PDF iÃ§in uygun bir HTML yapÄ±sÄ± oluÅŸturuyoruz
                const pdfElement = document.createElement('div');
                
                let htmlContent = `
                    <div style="font-family: Arial, sans-serif; padding: 40px; color: #1e293b; line-height: 1.6;">
                        <h1 style="color: #1d63cb; margin-bottom: 5px; font-size: 24px; border-bottom: 2px solid #e2e8f0; padding-bottom: 15px;">ğŸ¢ Emlaknomi Arsa Raporu</h1>
                        
                        <div style="margin-top: 25px;">
                            <p><strong>ğŸ“ Arsa AlanÄ±:</strong> ${params.arsaAlani || 0} mÂ² (${params.nizamTipi} Nizam)</p>
                            <p><strong>ğŸ—ï¸ Emsal:</strong> ${params.emsal || 0} &nbsp;|&nbsp; <strong>TAKS:</strong> ${params.taks || 0} &nbsp;|&nbsp; <strong>${katBilgisi}</strong></p>
                        </div>

                        <div style="margin-top: 25px; padding: 15px; background-color: #f8fafc; border-radius: 8px; border: 1px solid #e2e8f0;">
                            <p><strong>ğŸ“ Toplam BrÃ¼t Ä°nÅŸaat:</strong> ${ozet.toplamBrutKapasite.toLocaleString(undefined, {maximumFractionDigits:0})} mÂ²</p>
                            <p><strong>âœ… Toplam Net Ä°nÅŸaat:</strong> ${netInsaatStr}</p>
                            <p><strong>ğŸ  Planlanan Ãœnite:</strong> ${planlananUniteStr}</p>
                        </div>

                        <h3 style="color: #1d63cb; margin-top: 30px; font-size: 18px;">ğŸ’¡ TAHMÄ°NÄ° SENARYOLAR</h3>
                        <p style="font-size: 12px; color: #ef4444; margin-top: -10px; margin-bottom: 10px;">(Not: AÅŸaÄŸÄ±daki seÃ§enekler alternatiflerdir, birbirleriyle toplanmazlar.)</p>
                        <ul style="list-style-type: none; padding-left: 0;">
                            ${tahminiSenaryoHtml}
                        </ul>
                `;

                if (seciliVarMi) {
                    let manuelHtmlLines = "";
                    Object.values(sepet).forEach(d => {
                        if (d.adet > 0) {
                            manuelHtmlLines += `<li style="padding: 8px 0; border-bottom: 1px dashed #cbd5e1;"><strong>${d.odaTipi} (${d.boyut})</strong> &nbsp;&nbsp;&rarr;&nbsp;&nbsp; ${d.adet} Adet &nbsp;<span style="color: #64748b; font-size: 14px;">(Net: ${d.net}mÂ²)</span></li>`;
                        }
                    });
                    
                    htmlContent += `
                        <h3 style="color: #f97316; margin-top: 30px; font-size: 18px;">ğŸ“Œ SEÃ‡TÄ°ÄÄ°NÄ°Z ODA SAYISINA GÃ–RE DAÄ°RE ADETÄ°</h3>
                        <ul style="list-style-type: none; padding-left: 0;">
                            ${manuelHtmlLines}
                        </ul>
                    `;
                }

                htmlContent += `
                        <p style="margin-top: 30px; font-weight: bold;">Verimlilik OranÄ±: ${verimStr}</p>
                        
                        <div style="margin-top: 50px; text-align: center; color: #94a3b8; font-size: 12px; border-top: 1px solid #e2e8f0; padding-top: 20px;">
                            Emlaknomi ile hesaplanmÄ±ÅŸtÄ±r.
                        </div>
                    </div>
                `;

                pdfElement.innerHTML = htmlContent;

                const opt = {
                    margin:       0,
                    filename:     'Emlaknomi_Proje_Raporu.pdf',
                    image:        { type: 'jpeg', quality: 0.98 },
                    html2canvas:  { scale: 2 },
                    jsPDF:        { unit: 'in', format: 'a4', orientation: 'portrait' }
                };

                setToastMessage("PDF Ä°ndiriliyor...");
                html2pdf().set(opt).from(pdfElement).save().then(() => {
                    setTimeout(() => setToastMessage(""), 3500);
                });
            };

            // PaylaÅŸ (WhatsApp/Web Share API ve Pano Kopyalama)
            const handleShare = async () => {
                const { manuelDetay, seciliVarMi, verimlilik, tahminiSenaryoText } = getReportDetails();

                const maxNetAlan = Math.round(ozet.emsalAlani || 0);
                const netInsaatStr = seciliVarMi 
                    ? `${ozet.toplamNetM2.toLocaleString()} mÂ²` 
                    : `${maxNetAlan.toLocaleString()} mÂ² (En fazla yapÄ±labilecek net alan)`;
                
                const planlananUniteStr = seciliVarMi ? `${ozet.toplamDaire} Adet` : 'Belirlenmedi (Manuel SeÃ§im Yok)';
                const verimStr = seciliVarMi ? `%${verimlilik}` : 'Belirlenmedi';
                
                const katBilgisi = params.katBirim === 'metre' ? `YÃ¼kseklik: ${params.katSayisi}m (~${ozet.katSayisi} Kat)` : `Kat: ${params.katSayisi || 0}`;

                let textSummary = `ğŸ¢ Emlaknomi Arsa Raporu\n` +
                                  `----------------------\n` +
                                  `ğŸ“ Arsa AlanÄ±: ${params.arsaAlani || 0} mÂ² (${params.nizamTipi} Nizam)\n` +
                                  `ğŸ—ï¸ Emsal: ${params.emsal || 0} | TAKS: ${params.taks || 0} | ${katBilgisi}\n` +
                                  `ğŸ“ Toplam BrÃ¼t Ä°nÅŸaat: ${ozet.toplamBrutKapasite.toLocaleString(undefined, {maximumFractionDigits:0})} mÂ²\n` +
                                  `âœ… Toplam Net Ä°nÅŸaat: ${netInsaatStr}\n` +
                                  `ğŸ  Planlanan Ãœnite: ${planlananUniteStr}\n` +
                                  `----------------------\n\n`;

                textSummary += `ğŸ’¡ TAHMÄ°NÄ° SENARYOLAR:\n(Not: SeÃ§enekler alternatiflerdir, toplanmazlar)\n${tahminiSenaryoText}\n----------------------\n`;

                if (seciliVarMi) {
                    textSummary += `ğŸ“Œ SEÃ‡TÄ°ÄÄ°NÄ°Z ODA SAYISINA GÃ–RE DAÄ°RE ADETÄ°:\n${manuelDetay}----------------------\n`;
                }

                textSummary += `Verimlilik OranÄ±: ${verimStr}\n\nEmlaknomi ile hesaplanmÄ±ÅŸtÄ±r.`;

                // Cihaz Web Share API (WhatsApp vb. ile paylaÅŸÄ±m menÃ¼sÃ¼) destekliyorsa onu kullan
                if (navigator.share) {
                    try {
                        await navigator.share({
                            title: 'Emlaknomi Arsa Raporu',
                            text: textSummary,
                        });
                        setToastMessage("PaylaÅŸÄ±m menÃ¼sÃ¼ aÃ§Ä±ldÄ±!");
                        setTimeout(() => setToastMessage(""), 3500);
                        return; // PaylaÅŸÄ±m baÅŸarÄ±lÄ±ysa kopyalama koduna geÃ§me
                    } catch (err) {
                        console.log('KullanÄ±cÄ± paylaÅŸÄ±mÄ± iptal etti veya bir hata oluÅŸtu.', err);
                        // Hata olursa veya iptal edilirse fallback olarak aÅŸaÄŸÄ±dan kopyalamaya devam etsin.
                    }
                }

                // Desteklemeyen cihazlar (veya masaÃ¼stÃ¼) iÃ§in eski nesil fallback (kopyalama)
                const textArea = document.createElement("textarea");
                textArea.value = textSummary;
                document.body.appendChild(textArea);
                textArea.select();
                try {
                    document.execCommand('copy');
                    setToastMessage("Proje Ã¶zeti panoya kopyalandÄ±!");
                    setTimeout(() => setToastMessage(""), 3500);
                } catch (err) {
                    console.error('Kopyalama baÅŸarÄ±sÄ±z', err);
                }
                document.body.removeChild(textArea);
            };

            useEffect(() => {
                const arsaVal = parseFloat(params.arsaAlani) || 0;
                const terkVal = parseFloat(params.yolaTerkDeger) || 0;
                let emsalVal = parseFloat(params.emsal) || 0;
                let taksVal = parseFloat(params.taks) || 0;
                let rawKat = parseFloat(params.katSayisi) || 0; 
                let isMetre = params.katBirim === 'metre';

                // --- AKILLI DEÄER DÃœZELTME (PARSING) ---
                if (taksVal > 1) {
                    if (taksVal >= 10) taksVal = taksVal / 100; // Ã–rn: 30 -> 0.30
                    else taksVal = taksVal / 10; // Ã–rn: 3 -> 0.30
                }

                if (emsalVal > rawKat && rawKat > 0) {
                    if (emsalVal >= 100) {
                        emsalVal = emsalVal / 100; // Ã–rn: 150 -> 1.50
                    } else if (emsalVal >= 10) {
                        if ((emsalVal / 10) > rawKat || emsalVal === 30) {
                            emsalVal = emsalVal / 100; // Ã–rn: 30 -> 0.30
                        } else {
                            emsalVal = emsalVal / 10; // Ã–rn: 15 -> 1.5
                        }
                    }
                }
                // ----------------------------------------
                
                // YÃ¼kseklik (Metre) -> Kat DÃ¶nÃ¼ÅŸÃ¼mÃ¼ (3 Metre = 1 Kat varsayÄ±mÄ±, 0.5 payÄ± ile)
                let finalKatVal = 1;
                if (rawKat > 0) {
                    finalKatVal = isMetre ? Math.round((rawKat / 3) * 2) / 2 : rawKat;
                    finalKatVal = Math.max(0.5, finalKatVal); // Ã‡atÄ± payÄ± dahil minimum 0.5 kat
                }

                let netArsa = arsaVal;
                if (params.yolaTerkBirim === '%') {
                    netArsa = arsaVal * (1 - terkVal / 100);
                } else {
                    netArsa = Math.max(0, arsaVal - terkVal);
                }

                const maksTaban = netArsa * taksVal;
                let emsalAlani = netArsa * emsalVal;
                
                // H KÄ±sÄ±tlamasÄ± (Kat sÄ±nÄ±rlamasÄ±na gÃ¶re maksimum alanÄ± denetleme)
                if (finalKatVal > 0 && (emsalAlani / finalKatVal) > maksTaban) {
                    emsalAlani = maksTaban * finalKatVal;
                }

                const toplamBrutKapasite = emsalAlani * 1.30; 
                // Kat baÅŸÄ± brÃ¼t, emsalin buÃ§uklu kat dahil total daÄŸÄ±lÄ±mÄ±nÄ± ifade eder.
                const katBrutKapasitesi = finalKatVal > 0 ? toplamBrutKapasite / finalKatVal : 0;
                
                let suanKullanilanBrut = 0;
                let suanToplamDaire = 0;
                let suanNetM2 = 0;

                Object.values(sepet).forEach(d => {
                    suanKullanilanBrut += (d.adet * d.brut);
                    suanNetM2 += (d.adet * d.net);
                    suanToplamDaire += d.adet;
                });
                
                const yerlesimUygun = checkKapasite(sepet, rawKat > 0 ? finalKatVal : 0, katBrutKapasitesi);

                setOzet({
                    emsalAlani: emsalAlani,
                    toplamBrutKapasite: toplamBrutKapasite,
                    kullanilanM2: suanKullanilanBrut,
                    dolulukOrani: toplamBrutKapasite > 0 ? (suanKullanilanBrut / toplamBrutKapasite) * 100 : 0,
                    netArsa: netArsa,
                    toplamDaire: suanToplamDaire,
                    toplamNetM2: suanNetM2,
                    katSayisi: rawKat > 0 ? finalKatVal : 0,
                    katBrutKapasitesi: katBrutKapasitesi,
                    yerlesimUygun: yerlesimUygun
                });
            }, [params, sepet]);

            return (
                <div className="min-h-screen bg-[#F8FAFC] font-sans text-slate-900 p-4 md:p-8">
                    
                    {/* Toast MesajÄ± */}
                    {toastMessage && (
                        <div className="fixed bottom-6 right-6 bg-[#1D63CB] text-white px-6 py-4 rounded-2xl shadow-2xl z-50 animate-bounce flex items-center gap-3 print:hidden">
                            <CheckCircle className="w-5 h-5 text-green-300" />
                            <span className="font-bold text-sm">{toastMessage}</span>
                        </div>
                    )}

                    <div className="max-w-6xl mx-auto space-y-8">
                        
                        <header className="flex flex-col md:flex-row md:items-center justify-between gap-6">
                            <div className="flex items-center gap-5">
                                <EmlaknomiLogo />
                                <div>
                                    <h1 className="text-3xl font-black text-slate-800 tracking-tight capitalize leading-none">Emlaknomi</h1>
                                    <p className="text-[#1D63CB] font-bold text-xs uppercase tracking-[0.2em] mt-1 flex items-center gap-2">
                                        <MapIcon className="w-3 h-3" /> Arsa Hesaplama ProgramÄ±
                                    </p>
                                </div>
                            </div>
                            
                            <div className="flex gap-2 print:hidden">
                                <button onClick={handleShare} className="flex items-center gap-2 px-4 py-2 bg-white border border-slate-200 rounded-xl text-xs font-bold text-slate-600 hover:bg-slate-50 transition-all shadow-sm active:scale-95">
                                    <Share2 className="w-4 h-4" /> PaylaÅŸ
                                </button>
                                <button onClick={handlePrint} className="flex items-center gap-2 px-4 py-2 bg-[#1D63CB] text-white rounded-xl text-xs font-bold hover:bg-blue-700 transition-all shadow-md active:scale-95">
                                    <FileText className="w-4 h-4" /> Rapor Al
                                </button>
                            </div>
                        </header>

                        <div className="grid grid-cols-1 lg:grid-cols-12 gap-8">
                            
                            <aside className="lg:col-span-4 space-y-6">
                                <div className="bg-white rounded-[2rem] p-6 shadow-sm border border-slate-200">
                                    <h2 className="text-xs font-bold text-slate-400 uppercase tracking-widest mb-6 flex items-center gap-2">
                                        <Ruler className="w-4 h-4 text-[#FF8C00]" /> 1. Arsa Bilgilerini Girin
                                    </h2>
                                    <div className="space-y-4">
                                        <div className="group">
                                            <label className="text-[10px] font-black text-slate-400 uppercase ml-1 transition-colors group-focus-within:text-[#1D63CB]">Arsa AlanÄ± (mÂ²)</label>
                                            <input placeholder="Ã–rn: 1000" type="number" name="arsaAlani" value={params.arsaAlani} onChange={handleParamChange} className="w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-2xl focus:ring-2 focus:ring-[#1D63CB] focus:bg-white outline-none font-bold mt-1 shadow-sm transition-all" />
                                        </div>

                                        <div className="group">
                                            <label className="text-[10px] font-black text-slate-400 uppercase ml-1 group-focus-within:text-[#1D63CB]">Yola Terk MikarÄ±</label>
                                            <div className="flex mt-1">
                                                <input placeholder="Ã–rn: 10" type="number" name="yolaTerkDeger" value={params.yolaTerkDeger} onChange={handleParamChange} className="w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-l-2xl focus:ring-2 focus:ring-[#1D63CB] focus:bg-white outline-none font-bold shadow-sm" />
                                                <select name="yolaTerkBirim" value={params.yolaTerkBirim} onChange={handleParamChange} className="bg-slate-100 border border-l-0 border-slate-200 rounded-r-2xl px-4 font-bold text-slate-600 outline-none hover:bg-slate-200 transition-colors">
                                                    <option value="m2">mÂ²</option>
                                                    <option value="%">%</option>
                                                </select>
                                            </div>
                                        </div>

                                        <div>
                                            <label className="text-[10px] font-black text-slate-400 uppercase ml-1">Ä°mar NizamÄ±</label>
                                            <div className="relative mt-1">
                                                <select name="nizamTipi" value={params.nizamTipi} onChange={handleParamChange} className="w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-2xl focus:ring-2 focus:ring-[#1D63CB] outline-none font-bold shadow-sm appearance-none">
                                                    {['AyrÄ±k', 'BitiÅŸik', 'Blok', 'Ä°kiz'].map(n => <option key={n} value={n}>{n} Nizam</option>)}
                                                </select>
                                                <ChevronDown className="absolute right-4 top-1/2 -translate-y-1/2 text-slate-400 w-4 h-4 pointer-events-none" />
                                            </div>
                                        </div>

                                        <div className="grid grid-cols-2 gap-4">
                                            <div>
                                                <label className="text-[10px] font-black text-slate-400 uppercase ml-1">Emsal (KAKS)</label>
                                                <input placeholder="Ã–rn: 1.5" type="number" name="emsal" step="0.1" value={params.emsal} onChange={handleParamChange} className="w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-2xl focus:ring-2 focus:ring-[#1D63CB] outline-none font-bold mt-1 shadow-sm" />
                                            </div>
                                            <div>
                                                <label className="text-[10px] font-black text-slate-400 uppercase ml-1">TAKS (Oturum)</label>
                                                <input placeholder="Ã–rn: 0.30" type="number" name="taks" step="0.01" value={params.taks} onChange={handleParamChange} className="w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-2xl focus:ring-2 focus:ring-[#1D63CB] outline-none font-bold mt-1 shadow-sm" />
                                            </div>
                                        </div>

                                        <div>
                                            <label className="text-[10px] font-black text-slate-400 uppercase ml-1">Kat SayÄ±sÄ± / YÃ¼kseklik</label>
                                            <div className="flex mt-1">
                                                <input placeholder="Ã–rn: 2 veya 2.5" type="number" step="0.5" name="katSayisi" value={params.katSayisi} onChange={handleParamChange} className="w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-l-2xl focus:ring-2 focus:ring-[#1D63CB] focus:bg-white outline-none font-bold shadow-sm" />
                                                <select name="katBirim" value={params.katBirim} onChange={handleParamChange} className="bg-slate-100 border border-l-0 border-slate-200 rounded-r-2xl px-2 text-xs font-bold text-slate-600 outline-none hover:bg-slate-200 transition-colors">
                                                    <option value="kat">Kat</option>
                                                    <option value="metre">Metre (H)</option>
                                                </select>
                                            </div>
                                            {params.katBirim === 'metre' && params.katSayisi > 0 && (
                                                <div className="text-[10px] text-[#1D63CB] font-bold mt-2 ml-1">
                                                    Hesaplanan: {ozet.katSayisi} Kat <span className="opacity-60">(Ã‡atÄ± payÄ± hesaba katÄ±ldÄ±)</span>
                                                </div>
                                            )}
                                        </div>
                                    </div>
                                </div>

                                <div className="bg-[#1D63CB] rounded-[2rem] p-8 text-white shadow-xl relative overflow-hidden">
                                    <div className="absolute top-0 right-0 w-32 h-32 bg-white/5 rounded-full -mr-16 -mt-16 blur-2xl"></div>
                                    <div className="relative z-10 space-y-6">
                                        <div>
                                            <div className="flex items-center gap-2 mb-1 text-blue-200">
                                                <Building2 className="w-4 h-4" />
                                                <span className="text-[10px] font-bold uppercase tracking-widest">Toplam BrÃ¼t Ä°nÅŸaat</span>
                                            </div>
                                            <div className="text-5xl font-black text-white tracking-tighter">
                                                {ozet.toplamBrutKapasite.toLocaleString(undefined, {maximumFractionDigits:0})} 
                                                <span className="text-xl text-blue-300 ml-2 font-medium">mÂ²</span>
                                            </div>
                                        </div>

                                        <div className="pt-6 border-t border-white/10 space-y-3">
                                            <div className="flex justify-between items-center text-xs">
                                                <span className="text-blue-100/60 font-medium">Net Emsal AlanÄ±:</span>
                                                <span className="font-bold text-white">{ozet.emsalAlani.toLocaleString(undefined, {maximumFractionDigits:0})} mÂ²</span>
                                            </div>
                                            <div className="flex justify-between items-center text-xs">
                                                <span className="text-blue-100/60 font-medium">Kat BaÅŸÄ±na BrÃ¼t Alan (Tam Kat):</span>
                                                <span className="font-bold text-white">{ozet.katBrutKapasitesi.toLocaleString(undefined, {maximumFractionDigits:0})} mÂ²</span>
                                            </div>
                                            <div className="flex justify-between items-center text-xs">
                                                <span className="text-blue-100/60 font-medium">Net Ä°mar Arsa:</span>
                                                <span className="font-bold text-white">{ozet.netArsa.toLocaleString()} mÂ²</span>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </aside>

                            <main className="lg:col-span-8 space-y-8">
                                <section className="bg-slate-900 rounded-[2.5rem] p-8 shadow-2xl border border-slate-800 text-white relative overflow-hidden">
                                    <div className="absolute -bottom-10 -left-10 w-40 h-40 bg-blue-500/10 rounded-full blur-3xl"></div>
                                    <div className="relative z-10">
                                        <h2 className="text-xs font-bold text-[#FF8C00] uppercase tracking-widest mb-6 flex items-center gap-2">
                                            <LayoutGrid className="w-4 h-4" /> Tahmini Senaryo (DetaylÄ± sorgu iÃ§in sayfayÄ± aÅŸaÄŸÄ±ya indiriniz.)
                                        </h2>
                                        <div className="grid grid-cols-2 md:grid-cols-4 gap-4">
                                            {Object.keys(DAÄ°RE_STANDARTLARI).map((oda) => {
                                                const s = DAÄ°RE_STANDARTLARI[oda].Orta;
                                                
                                                const tamKatSayisi = Math.floor(ozet.katSayisi || 0);
                                                const bucukKisim = (ozet.katSayisi || 0) - tamKatSayisi;
                                                
                                                const adetPerTamKat = Math.floor((ozet.katBrutKapasitesi || 0) / s.brut);
                                                const adetBucukKat = bucukKisim > 0 ? Math.floor(((ozet.katBrutKapasitesi || 0) * bucukKisim) / s.brut) : 0;
                                                
                                                const adet = (adetPerTamKat * tamKatSayisi) + adetBucukKat;
                                                
                                                const kalanBrutPerTamKat = Math.max(0, (ozet.katBrutKapasitesi || 0) - (adetPerTamKat * s.brut));
                                                const kalanNetPerTamKat = Math.floor(kalanBrutPerTamKat / 1.30);
                                                
                                                let kalanNotu = "";
                                                if (bucukKisim > 0) {
                                                    const kalanBrutBucuk = Math.max(0, ((ozet.katBrutKapasitesi || 0) * bucukKisim) - (adetBucukKat * s.brut));
                                                    const kalanNetBucuk = Math.floor(kalanBrutBucuk / 1.30);
                                                    if (kalanNetPerTamKat > 0 || kalanNetBucuk > 0) {
                                                        kalanNotu = `Artan Net: Kat ${kalanNetPerTamKat}mÂ², Ã‡atÄ± ${kalanNetBucuk}mÂ²`;
                                                    }
                                                } else {
                                                    if (kalanNetPerTamKat > 0) {
                                                        kalanNotu = `Her katta ${kalanNetPerTamKat} mÂ² net boÅŸluk kalÄ±r`;
                                                    }
                                                }

                                                return (
                                                    <div key={oda} className="bg-white/5 p-5 rounded-3xl border border-white/10 flex flex-col items-center text-center hover:bg-white/10 transition-colors cursor-default group">
                                                        <div className="text-[10px] font-black text-blue-400 mb-1 uppercase tracking-wider group-hover:text-blue-300 transition-colors">{oda} Tipi</div>
                                                        <div className="flex items-baseline justify-center gap-1 text-4xl font-black text-white leading-tight whitespace-nowrap">
                                                            {adet} <span className="text-[10px] text-white/50 font-bold uppercase tracking-widest">Adet</span>
                                                        </div>
                                                        <div className="text-[10px] font-bold text-white/60 mt-2 space-y-0.5 w-full">
                                                            <div className="bg-white/10 px-2 py-0.5 rounded text-blue-200">BrÃ¼t: {s.brut}mÂ²</div>
                                                            <div className="text-white/30 mb-2">Net: {s.net}mÂ²</div>
                                                            
                                                            {kalanNotu && ozet.katBrutKapasitesi > 0 && (
                                                                <div className="mt-3 text-[9px] text-[#FF8C00] font-medium bg-[#FF8C00]/10 px-2 py-1.5 rounded-lg w-full text-center border border-[#FF8C00]/20 leading-snug">
                                                                    {kalanNotu}
                                                                </div>
                                                            )}
                                                        </div>
                                                    </div>
                                                );
                                            })}
                                        </div>
                                    </div>
                                </section>

                                <section className="bg-white rounded-[2.5rem] p-8 shadow-sm border border-slate-200 overflow-hidden">
                                    <div className="flex flex-col md:flex-row md:items-center justify-between mb-8 gap-4">
                                        <div>
                                            <h2 className="text-sm font-bold text-slate-800 uppercase tracking-tight flex items-center gap-2">
                                                <Home className="w-5 h-5 text-[#1D63CB]" /> AÅŸaÄŸÄ±dan istediÄŸiniz oda sayÄ±larÄ±nÄ± seÃ§ebilirsiniz.
                                            </h2>
                                            <p className="text-xs text-slate-400 font-medium mt-1">SonuÃ§lar en altta gÃ¶rÃ¼necektir..</p>
                                        </div>
                                        <div className="bg-slate-50 px-6 py-4 rounded-[1.5rem] border border-slate-100 text-right min-w-[140px] shadow-sm relative">
                                            <div className="text-[10px] font-black text-slate-400 uppercase tracking-widest">Kapasite KullanÄ±mÄ±</div>
                                            <div className={`text-2xl font-black ${(ozet.dolulukOrani >= 100 || !ozet.yerlesimUygun) ? 'text-red-500' : 'text-[#1D63CB]'}`}>
                                                %{ozet.dolulukOrani.toFixed(1)}
                                            </div>
                                            {(ozet.dolulukOrani >= 100 || !ozet.yerlesimUygun) && (
                                                <div className="absolute -top-2 -right-2 bg-red-500 text-white p-1 rounded-full animate-pulse shadow-lg" title={!ozet.yerlesimUygun ? "Kat planÄ±na sÄ±ÄŸmÄ±yor!" : "Kapasite dolu"}>
                                                    <AlertTriangle className="w-3 h-3" />
                                                </div>
                                            )}
                                            {!ozet.yerlesimUygun && (
                                                <div className="text-[9px] text-red-500 font-bold mt-1">Kat PlanÄ± Uyumsuz</div>
                                            )}
                                        </div>
                                    </div>

                                    <div className="w-full h-5 bg-slate-100 rounded-full overflow-hidden mb-10 shadow-inner relative border border-slate-200/50">
                                        <div 
                                            className={`h-full transition-all duration-700 ease-out shadow-lg ${(ozet.dolulukOrani >= 100 || !ozet.yerlesimUygun) ? 'bg-gradient-to-r from-red-500 to-rose-600' : 'bg-gradient-to-r from-[#1D63CB] to-blue-400'}`} 
                                            style={{ width: `${Math.min(100, ozet.dolulukOrani)}%` }}
                                        ></div>
                                    </div>

                                    <div className="space-y-8">
                                        {Object.keys(DAÄ°RE_STANDARTLARI).map((oda) => (
                                            <div key={oda} className="relative">
                                                <div className="flex items-center gap-4 mb-4">
                                                    <span className="text-lg font-black text-slate-800">{oda}</span>
                                                    <div className="h-px flex-1 bg-slate-100"></div>
                                                </div>
                                                
                                                <div className="grid grid-cols-1 md:grid-cols-3 gap-5">
                                                    {['Kucuk', 'Orta', 'Buyuk'].map((boyut) => {
                                                        const key = `${oda}-${boyut}`;
                                                        const adet = sepet[key]?.adet || 0;
                                                        const s = DAÄ°RE_STANDARTLARI[oda][boyut];
                                                        
                                                        const testSepet = { ...sepet, [key]: { ...s, adet: adet + 1, odaTipi: oda, boyut } };
                                                        const asarMi = !checkKapasite(testSepet, ozet.katSayisi, ozet.katBrutKapasitesi);

                                                        const label = boyut === 'Kucuk' ? 'KÃœÃ‡ÃœK' : boyut === 'Orta' ? 'ORTA' : 'BÃœYÃœK';
                                                        const badgeColor = boyut === 'Kucuk' ? 'bg-emerald-50 text-emerald-600 border-emerald-100' : boyut === 'Orta' ? 'bg-blue-50 text-blue-600 border-blue-100' : 'bg-orange-50 text-orange-600 border-orange-100';

                                                        return (
                                                            <div key={key} className={`bg-white p-5 rounded-[1.5rem] border transition-all duration-500 ${adet > 0 ? 'border-[#1D63CB] shadow-xl ring-4 ring-blue-50' : 'border-slate-200 hover:border-slate-300'} ${asarMi && !adet ? 'opacity-50 grayscale' : ''}`}>
                                                                <div className="flex justify-between items-center mb-1">
                                                                    <span className={`text-[10px] font-black px-2 py-1 rounded-lg border ${badgeColor}`}>{label}</span>
                                                                    <span className={`text-xs font-bold ${adet > 0 ? 'text-[#1D63CB]' : 'text-slate-300'}`}>{adet} Adet</span>
                                                                </div>
                                                                <div className="mt-3">
                                                                    <span className="text-[10px] font-bold text-slate-400 uppercase">Net Alan: {s.net}mÂ²</span>
                                                                    <div className="text-[10px] font-medium text-slate-300">BrÃ¼t: {s.brut}mÂ²</div>
                                                                </div>
                                                                
                                                                <div className="flex items-center justify-between mt-5 pt-4 border-t border-slate-50 print:hidden">
                                                                    <button 
                                                                        onClick={() => updateAdet(oda, boyut, -1)} 
                                                                        className="p-2.5 text-slate-300 hover:text-red-500 hover:bg-red-50 rounded-xl transition-all active:scale-95 disabled:opacity-30"
                                                                        disabled={adet === 0}
                                                                    >
                                                                        <Minus className="w-5 h-5" />
                                                                    </button>
                                                                    <span className={`text-2xl font-black ${adet > 0 ? 'text-[#1D63CB]' : 'text-slate-200'}`}>{adet}</span>
                                                                    <button 
                                                                        onClick={() => updateAdet(oda, boyut, 1)} 
                                                                        disabled={asarMi} 
                                                                        className={`p-2.5 rounded-xl transition-all active:scale-95 ${asarMi ? 'text-slate-200 cursor-not-allowed' : 'text-[#1D63CB] hover:bg-blue-50'}`}
                                                                        title={asarMi ? "Kat planÄ±nda yeterli alan yok" : "Ekle"}
                                                                    >
                                                                        <Plus className="w-5 h-5" />
                                                                    </button>
                                                                </div>
                                                            </div>
                                                        );
                                                    })}
                                                </div>
                                            </div>
                                        ))}
                                    </div>

                                    <div className="mt-12 flex justify-between items-center pt-8 border-t border-slate-100">
                                        <button onClick={() => setSepet({})} className="flex items-center gap-2 text-xs font-bold text-slate-400 hover:text-red-500 transition-colors tracking-widest uppercase py-2 px-4 hover:bg-red-50 rounded-xl print:hidden">
                                            <Trash2 className="w-4 h-4" /> SeÃ§imleri Temizle
                                        </button>
                                        <div className="text-right">
                                            <div className="text-[10px] font-black text-slate-400 uppercase tracking-widest">Planlanan Toplam Ãœnite</div>
                                            <div className="text-4xl font-black text-slate-800">{ozet.toplamDaire} <span className="text-sm text-slate-400 font-bold uppercase">Adet</span></div>
                                        </div>
                                    </div>
                                </section>

                                {ozet.toplamDaire > 0 && (
                                    <section className="bg-gradient-to-br from-slate-900 to-[#1D63CB] rounded-[2.5rem] p-10 text-white shadow-2xl relative overflow-hidden">
                                        <div className="absolute top-0 right-0 p-12 opacity-5 scale-150 rotate-12">
                                            <Building2 className="w-48 h-48" />
                                        </div>
                                        <div className="relative z-10 grid grid-cols-1 md:grid-cols-12 gap-10 items-center">
                                            <div className="md:col-span-7 space-y-8">
                                                <div>
                                                    <h3 className="text-[#FF8C00] font-black text-xs uppercase tracking-[0.3em] mb-4">Proje Teknik Ã–zeti</h3>
                                                    <div className="flex items-baseline gap-3">
                                                        <div className="text-6xl font-black tracking-tighter">{ozet.toplamNetM2.toLocaleString()}</div>
                                                        <div className="text-xl font-bold text-blue-300/80 uppercase">Toplam Net inÅŸaat mÂ²</div>
                                                    </div>
                                                </div>
                                                
                                                <div className="grid grid-cols-2 gap-6">
                                                    <div className="bg-white/5 p-4 rounded-2xl border border-white/10">
                                                        <div className="text-[10px] text-blue-300 font-bold uppercase tracking-wider mb-1">Toplam BrÃ¼t KullanÄ±lan</div>
                                                        <div className="text-xl font-black">{ozet.kullanilanM2.toLocaleString()} mÂ²</div>
                                                    </div>
                                                    <div className="bg-white/5 p-4 rounded-2xl border border-white/10">
                                                        <div className="text-[10px] text-blue-300 font-bold uppercase tracking-wider mb-1">Verimlilik</div>
                                                        <div className="text-xl font-black">%{((ozet.toplamNetM2 / ozet.kullanilanM2) * 100).toFixed(1)}</div>
                                                    </div>
                                                </div>
                                            </div>

                                            <div className="md:col-span-5">
                                                <div className="bg-white/10 p-8 rounded-[2rem] border border-white/20 backdrop-blur-xl shadow-2xl">
                                                    <div className="flex items-center gap-2 mb-6">
                                                        <PieChart className="w-4 h-4 text-[#FF8C00]" />
                                                        <h4 className="text-[10px] font-black text-white/80 uppercase tracking-widest">Ãœnite DaÄŸÄ±lÄ±mÄ±</h4>
                                                    </div>
                                                    <div className="space-y-4">
                                                    {Object.values(sepet).map(d => d.adet > 0 && (
                                                        <div key={`${d.odaTipi}-${d.boyut}`} className="flex justify-between items-center group">
                                                            <div className="flex items-center gap-3">
                                                                <div className="w-2 h-2 rounded-full bg-[#FF8C00] group-hover:scale-125 transition-transform"></div>
                                                                <span className="text-sm font-bold text-blue-100">{d.odaTipi} <span className="text-[10px] opacity-40 font-medium">({d.boyut})</span></span>
                                                            </div>
                                                            <div className="text-sm font-black bg-white/10 px-3 py-1 rounded-lg border border-white/5">{d.adet} <span className="text-[9px] opacity-60">Adet</span></div>
                                                        </div>
                                                    ))}
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </section>
                                )}

                            </main>
                        </div>

                        <footer className="text-center py-12 border-t border-slate-200 mt-16">
                            <p className="text-[10px] font-black text-slate-300 uppercase tracking-[0.5em] hover:text-[#1D63CB] transition-colors cursor-default">
                                Ã–zcan AKTAÅ Gayrimenkul Teknolojileri â€¢ 2026
                            </p>
                        </footer>

                    </div>
                </div>
            );
        }

        // UygulamayÄ± HTML'e ekle
        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>
